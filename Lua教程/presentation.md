---
marp: true
theme: default
class: invert
footer: MiniWorld Lua Script Tutorial by OWALabuy

---


# 迷你世界Lua脚本入门教程

by 异端/世方府/欧阳闻奕

Github: @OWALabuy

UIN: 528278703


---

# 作者简介

**欧阳闻奕**(@OWALabuy), 猫, 二年级学生

迷你世界玩家, 迷你号528278703

异端组织成员, 世方府工作室团伙头目, 异端**轨心夕**(**杀手没有恨**)的小弟

**最没有实力**的音乐玩家, 早期在西瓜视频做生存主播, 后期做音乐地图

---

# 目录

1. 认识Lua语言
2. 环境配置及文本编辑器
3. 变量及数据类型
4. 数值运算
5. 流程控制及布尔值运算
6. 循环
7. 字符串操作
8. 表
9. 函数
10. 游戏数据抽象
11. 事件监听器

---

<!-- _header: 1. 认识Lua语言-->
# 第一章

认识Lua语言

---

<!-- _header: 1. 认识Lua语言-目录-->

> 1. Lua简介
>       1. 迷你世界脚本的优点
>       2. 运行环境说明
> 2. 消除恐惧

---

<!-- _header: 1.1 Lua简介 -->

# Lua简介

**Lua**（发音： /ˈluːə/，葡萄牙语“月亮”）是一个简洁、轻量、可扩展的脚本语言。Lua有着相对简单的C语言API而很容易嵌入应用中。很多应用程序使用Lua作为自己的嵌入式脚本语言，以此来实现可配置性、可扩展性。(*引自[维基百科](https://zh.wikipedia.org/wiki/Lua)*)

迷你世界内置了Lua脚本供玩家制作地图逻辑 提供了一系列API 可以实现各种功能 如破坏方块 放置方块 传送玩家等

迷你世界的Lua脚本可以实现强大的功能 有效帮助玩家进行地图创作

---

<!-- _header: 1.1.1 迷你世界脚本的优点 -->

## 迷你世界脚本的优点

相较于触发器 Lua脚本有以下优点:

1. **便于编写**: 脚本只需要一个文本编辑器即可编写 而触发器需要用鼠标点击和拖曳
2. **高效简洁**: 在Lua脚本中 创建变量和赋值只需要一行简单的代码 而在触发器中 需要大量的操作 这种差异尤其体现在大型脚本和复杂的逻辑中
3. **易于复制**: 使用脚本编写的逻辑可以复制到自己的其他地图中使用 或很方便地分享给其他玩家 而触发器不具备跨地图迁移功能
4. **适用于大型项目**: 使用脚本可以写一些大型的工具 *如作者的音乐方块生成器* 可以简化地图创作中的一些繁琐操作 而使用触发器不可以 想象一下 用4000多行代码实现的东西 如果用触发器来做 那得肝到爆

所以 学习脚本绝对是对玩家有利的一件事 可以方便地管理自己的地图逻辑

---

<!-- _header: 1.1.2 运行环境说明 -->

## 运行环境说明

迷你世界有端游和手游 它们都可以运行Lua脚本 但是玩家的编辑体验是不一样的

---

<!-- _header: 1.1.2.1 端游 -->

### 端游

迷你世界桌面版原生支持Windows系统 但是在GNU/Linux和MacOS中也可以通过Wine等兼容层运行

迷你世界端游提供了一个基于HTML的脚本编辑器 支持API参考 代码补全 语法高亮 多光标等功能 但是它有一定的缺点

1. 编辑的代码有一定概率丢失 这个问题 作者遇到过很多次
2. 不能使用自定义插件 如Vim插件 只能用鼠标操作 极其不方便

---

<!-- _header: 1.1.2.2 手游 -->

### 手游

迷你世界手游原生支持Android和IOS系统

手游版本不提供脚本编辑器相关功能 只有一个最基础的界面和一个API提示界面

作者不推荐使用迷你世界原生环境进行代码编写 后续会介绍更多便于使用的代码编辑器

---
<!-- _header: 1.2 消除恐惧-->

# 消除恐惧

在一些人心中 写代码是一种很难的事情 提到代码 就心生恐惧 觉得自己可能学不会 还没有入门就先泄气了

还有一种**错误且广泛**的观点: 写代码一定要英语好 其实根本不是这样的 没有学过英语的人 都可以学会写代码

对于Lua语言 需要记的词只有22个 如下 只要记住这些关键词的用法即可

```lua
and       break   do       else     elseif    end     false    for

function  if      in       local    nil       not     or       repeat

return    then    true     until    while     goto
```

---

<!-- _header: 1.2 消除恐惧-->

在本教程中 作者会尽量使用通俗的语言 详细的演示 生动的比喻来尽量使每一个观众理解那些概念

作者的目标是: 使小学阶段的玩家都能掌握脚本这一工具 所以不会讲特别难特别深入的内容 保证各位可以理解

所以请各位放心 在学完这些内容后 应该可以使用脚本来搭建你的地图逻辑了

<br/>

**我们遇到什么困难 都不要怕 微笑着面对它 消除恐惧的最好办法就是面对恐惧!!!**

**加油! 奥利给!!!!!!!!**

---

<!-- _header: 2. 环境配置及文本编辑器-->

# 第二章

环境配置与文本编辑器

---

<!-- _header: 2. 环境配置及文本编辑器-目录-->

> 1. 迷你世界环境
> 2. 在系统中配置Lua环境
>       1. Linux上的配置
>       2. 使用方法和交互模式
> 3. Visual Studio Code
>       1. vsc安装
>       2. vsc插件
> 4. 手机端可用的软件
>       1. AndroLua+
>       2. dcoder
>       3. vsc网页版

---

<!-- _header: 2.1 迷你世界环境 -->

# 迷你世界环境

迷你世界编辑模式的地图可以使用Lua脚本 步骤如下:

1. 以编辑模式打开一个高级创造模式的地图或老版本的开发者模式的地图
2. 点击"开发者工具"或按下J键
3. 点击"脚本" 高级创造模式下也可以直接按下L键
4. 选中或创建一个脚本组 在其中点击"新建脚本" 这会打开一个界面 可以在其中编写脚本
5. 退出会自动保存你的脚本 并且检查是否有错误 如果有语法错误会弹出一个弹窗
6. 退出脚本编辑界面之后 将右上角的测试调为开 这样在运行的时候可以看到控制台
7. 点击试玩 脚本就会运行

---

<!-- _header: 2.2 在系统中配置Lua环境-->

# 在系统中配置Lua环境

虽然这个教程主要是教大家在迷你世界中使用Lua脚本 但是在游戏中是有很多局限性的 迷你世界在2023年年初禁用了文件io和debug库等功能

Lua不仅可以在游戏中实现很多功能 也可以在各种工作中提高你的效率 作者在这一节中简要讲一下Lua在系统中的配置

---

<!-- _header: 2.2.1 在Linux上的配置-->

## 在Linux上的配置

如果你使用的是Debian系列的发行版 如Ubuntu LinuxMint等 可以使用APT安装Lua环境

```bash
sudo apt install lua5.3
```

安装其他版本的Lua也可以 根据自己的需求安装即可

如果你使用的是其他的Linux发行版 可以采用自己的包管理器进行安装 也可以到Lua官网下载源代码进行编译

---

<!-- _header: 2.2.2 使用方法及交互模式-->

## 使用方法及交互模式

Lua文件的后缀名为`.Lua` 创建一个文件 写入代码 保存退出

使用命令`lua yourfile.lua` 即可在终端运行这个脚本

Lua提供交互模式 可以在终端输入`lua`进入交互模式 ctrl+c退出

---

<!-- _header: 2.3 Visual Studio Code-->

# Visual Studio Code

Visual Studio Code是一个由微软公司开发的文本编辑器 开源跨平台 具有很强的可扩展性 支持多种编程语言 非常适合用来写代码和文档

迷你世界也提供了VSC的插件

本节对VSC的安装和配置做一个详细说明

---

<!-- _header: 2.3.1 vsc安装-->

## vsc安装

在[vsc官网](https://code.visualstudio.com/)下载适合自己系统的软件包 并进行安装(32位的windows系统已经停止支持 可用网页版)

在Linux发行版中 可以在包管理器中安装vsc 如debian系的APT

```bash
sudo apt install code
```

安装完毕后 在终端输入`code` 加上文件名或目录名 可以在vsc中打开这个文件或目录

例如 在当前工作路径下有一个名为`hello.lua`的文件 在终端键入

```bash
code hello.lua
```

即可打开此文件

---

<!-- _header: 2.3.2 vsc插件-->

## vsc插件

安装好了VSC之后 我们需要安装一些必要的插件 以下是几款推荐安装的插件

1. Vim插件
2. Lua插件
3. 迷你世界插件

---

<!-- _header: 2.3.2 vsc插件-->

### vsc应用商店插件

在vsc左侧的边栏中 点击扩展 在应用商店中搜索Lua 安装Lua相关的插件

安装vim插件 以便脱离鼠标编辑文本

### 迷你世界插件

迷你世界官方制作了一款vsc插件 支持一些API的提示 但是这款插件没有在vsc的应用商店中上线 我们需要去开发者学院下载

点击这个url 查看下载和安装的教程 [dev.mini1.cn](https://dev-wiki.mini1.cn/cyclopdeia?wikiMenuId=3&wikiId=2324)

---

<!-- _header: 2.4 手机端可用的软件-->

# 手机端可用的软件

有的小伙伴没有电脑 在手机上也有一些可以编辑代码的软件 本喵在这里推荐几款

大家可以在这些代码编辑软件中写好自己的代码 再粘贴到迷你世界中去

---

<!-- _header: 2.4 手机端可用的软件-->

### AndroLua+

本喵没有用过 不过迷你圈子里有很多手机玩家在用

### dcoder

支持语法高亮 代码补全等 可以云端存储和运行你的代码 每个文件的上限大概是2000行

有webapp和客户端app 如果你安装了客户端app 它会附带一个dcoder输入法 写代码非常方便 但是它不支持中文 如果要在注释中输入中文就需要切换到支持中文的输入法

### vsc网页版

基于web的vsc 支持语法高亮 代码补全等 还可以安装插件 网址:[vsc web](https://vscode.dev)

---

<!-- _header: 3. 变量及数据类型与代码基础 -->

# 第三章

变量及数据类型与代码基础

---

<!-- _header: 3. 变量及数据类型与代码基础-目录 -->

> 1. 变量及其命名规范
> 2. 数据类型
>       1. 数值 number
>       2. 字符串 string
>       3. 布尔值 boolean
>       4. 空值 nil
>       5. 表 table
>       6. 函数 function
> 3. 变量作用域简介
> 4. 注释与代码规范

---

<!-- _header: 3.1 变量及其命名规范 -->

# 变量及其命名规范 
---

<!-- _header:   -->









